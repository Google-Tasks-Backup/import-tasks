
======================= TODO ==============================

Catch over-quota exception; display (static) message to user


- BUG: Error downloading Outlook CSV on Android
# From http://digiblog.de/2011/04/19/android-and-the-download-file-headers/
    Can't return file from POST request on stock Android or Dolphin browsers
-- Downloading Outlook CSV;
--- Dolphin browser: downloads HTML code for /result as the correctly-named .csv file
--- Android browser: downloads HTML code for /result as tasks_outlook_Julie.htm (or tasks_ics_Julie.htm for ICS download)
# Tried (didn't work);
    self.response.clear() before building headers
    
# From http://stackoverflow.com/questions/4674737/avoiding-content-type-issues-when-downloading-a-file-via-browser-on-android
    "inability of the stock browser and the Android download manager to correctly handle downloads initiated through POST requests."
# See also http://code.google.com/p/android/issues/detail?id=1780
===> Need to serve different page if client is a mobile browser;
  - Use GET instead of POST for returning results
  - Improve UX for smaller screen
  
# To recognise user agent;
    Chrome, Windows 7:
        User-Agent = Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.78 Safari/535.11
    Firefox, Android
        User-Agent = Mozilla/5.0 (Android; Linux armv7l; rv:10.0.2) Gecko/20120215 Firefox/10.0.2 Fennec/10.0.2
    Opera, Android
        User-Agent = Opera/9.80 (Android; Opera Mini/6.5.27452/27.1324; U; en) Presto/2.8.119 Version/11.10
    Dolphin HD, Android (NOTE: Same as stock browser - When using default settings)
        User-Agent = Mozilla/5.0 (Linux; U; Android 2.3.3; en-au; GT-I9000 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
    Stock Android browser (NOTE: Same as Dolphin HD - When Dolphin uses default settings))
        User-Agent = Mozilla/5.0 (Linux; U; Android 2.3.3; en-au; GT-I9000 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
    
    
- Improve UX on Android browser
-- HTML display page looks good on Dolphin. 
     Indenting works
     Text wraps to screen width
-- Other pages (index, progress, result) do not fit on Android screen
--- Buttons and tables are too wide
--- Too much text before options/actions are displayed
- Test different resolutions using emulator



- Investigate; user clicks [Back] from HTML view, URL is /progress 
-- much more logical if it displays /results


- Consider displaying <No Title> if title is empty (or all spaces)
-- e.g. if len(trimspaces(title)) == 0
-- Currently looks confusing to have [ ] with nothing else
---(especially if task has no notes, and user selected no due/updated display)




- Consider adding links to various formats
-- Already included in Python data dump
-- As part of a note for Outlook (User controlled option?)
-- Check if supported by iCal, else in notes?
-- Investigate options for hTodo and RTM
-- As additional field(s) in raw dumps
--- Need to consider how to handle multiple links for one task
--- See https://developers.google.com/google-apps/tasks/v1/reference/tasks#resource




- Consider using an Alert rather than new page to notify that email was sent
-- All other actions stay on Reselts page. email requires user to use browser back button




- Investigate duplicated tasks
# It is almost certain that external task apps are involved, because I just found 56 tasks which were all updated within 7 seconds (starting at 22-08-2011  6:17:50 PM), and it is improbable to change that many tasks simultaneously any other way.
-- This task was definitely entered using CalenGoo
--- Note that updated is different for both
    Default List	tasks#task	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MDoxNDAwMDg2NDM1	0uhCwbPSh3mnl5uXt3orJuKhwIo/MTQ5NjA0MjQwOA""	Blood test, morning, IMPORTANT 	2012-03-05 12:15	https://www.googleapis.com/tasks/v1/lists/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MDow/tasks/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MDoxNDAwMDg2NDM1		3753		needsAction	2012-03-30			
    Default List	tasks#task	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MDoxNDYwOTUxODY	0uhCwbPSh3mnl5uXt3orJuKhwIo/NTU4OTM1MjQ5""	Blood test, morning, IMPORTANT 	2012-03-01 03:14	https://www.googleapis.com/tasks/v1/lists/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MDow/tasks/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MDoxNDYwOTUxODY		14349		needsAction	2012-03-30			

-- Don't know if this was entered/edited via web and/or any other apps
--- Note that all 3 have the same updated time, and the 1st and last have the same completed time. Position is significantly different between 1st and 3rd
    ZZ Archive	tasks#task	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyOQ	0uhCwbPSh3mnl5uXt3orJuKhwIo/LTM4NDU4MzgyNA""	Backup CalenGoo tasks	2011-08-22 18:17	https://www.googleapis.com/tasks/v1/lists/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6Mzow/tasks/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyOQ	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyNg	536870911	"Backup and then clear from visible list

    Options before clearing
    . Export to file
    .. From Android
    .. From PC
    . Rely on backup apps
    . Move to another task list"	completed		2011-05-29 14:42		
    ZZ Archive	tasks#task	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyOA	0uhCwbPSh3mnl5uXt3orJuKhwIo/ODY5ODQwNjcy""	Backup CalenGoo tasks	2011-08-22 18:17	https://www.googleapis.com/tasks/v1/lists/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6Mzow/tasks/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyOA	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyNg	1073741823		completed		2011-05-31 03:02		
    ZZ Archive	tasks#task	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyNw	0uhCwbPSh3mnl5uXt3orJuKhwIo/MTgyODM4MjA5MA""	Backup CalenGoo tasks	2011-08-22 18:17	https://www.googleapis.com/tasks/v1/lists/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6Mzow/tasks/MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyNw	MDQ2MzI0NTgyNTU0Nzk2NDUyMTQ6MzoyNg	2147483647	"Backup and then clear from visible list

    Options before clearing
    . Export to file
    .. From Android
    .. From PC
    . Rely on backup apps
    . Move to another task list"	completed		2011-05-29 14:42		




- Consider giving user option to include/exclude particular properties.
--- Can only exclude properties which are not mandatory for export formats (e.g., can't exclude title, completed, etc.) 
    We can then use 'fields' selector to specify a subset of fields to include in the response to reduce amount of data retrieved and stored
        From http://code.google.com/apis/tasks/v1/using.html#query-params
         
- Consider using check-boxes to allow user to select which fields they need, to limit request and data processing size)
    From http://code.google.com/apis/tasks/v1/reference.html#resource_tasks
        kind	string	Type of the resource. This is always tasks#task.	
        id	string	Task identifier.	
        etag	string	ETag of the resource.	
        title	string	Title of the task.	 yes
        updated	string	Last modification time of the task (as an RFC 3339 timestamp).	
        selfLink	string	URL pointing to this task. Used to retrieve, update, or delete this task.	
        parent	string	Parent task identifier. This field is omitted if it is a top-level task. This field is read-only. Use the move method to move the task under a different parent or to the top level.	
        position	string	String indicating the position of the task among its sibling tasks under the same parent task or at the top level. If this string is greater than another task's corresponding position string according to lexicographical ordering, the task is positioned after the other task under the same parent task or at the top level. This field is read-only. Use the move method to move the task to another position.	
        notes	string	Notes describing the task. Optional.	 yes
        status	string	Status of the task. This is either needsAction or completed.	 yes
        due	string	Due date of the task (as an RFC 3339 timestamp). Optional.	 yes
        completed	string	Completion date of the task (as an RFC 3339 timestamp). This field is omitted if the task has not been completed.	 yes
        deleted	boolean	Flag indicating whether the task has been deleted. The default is False.	
        hidden	boolean	Flag indicating whether the task is hidden. This is the case if the task had been marked completed when the task list was last cleared. The default is False. This field is read-only.
      
      
- Consider supporting apple-touch-icon.png



      
- Consider setting the initial refresh in progress.html to a small value, and then increasing.
-- Also consider delaying displaying first progress page, in case the job has already finished (e.g. if number of tasks is small)



- Catch exception returning results to user and display error page
-- e.g., malformed Django template was causing error
# It seems that only 3 types of server error can be caught and redirected to a specified web page.

    
    
    
    
Post to http://code.google.com/p/google-tasks-porter/issues/detail?id=15 when I have made more progress
- i.e., fixed Deadline error
-- Perhaps also to other issues pages, e.g., 
    http://code.google.com/p/google-tasks-porter/issues/detail?id=13
    http://code.google.com/p/google-tasks-porter/issues/detail?id=11


Import tasks
- See 2 Mar 2012 email to Bard



- Display custom error msg for server errors
  for over_quota & timeout
      http://code.google.com/appengine/docs/python/config/appconfig.html#Custom_Error_Responses

    
Tidy up index.html, so buttons are higher up once user has authenticated (remove text about "what GTB can do")



Investigate (from line 198 in worker.py)
	apiproxy_stub_map.apiproxy.GetPreCallHooks().Append(
		  'urlfetch_timeout_hook', urlfetch_timeout_hook, 'urlfetch')
	  

Display more traceback detail
- After exc_type, exc_value, exc_traceback = sys.exc_info(),
  dir(exc_traceback) gives ['tb_frame', 'tb_lasti', 'tb_lineno', 'tb_next']		
-- Need to find way of displaying useful info from this for debugging (i.e., norml stacktrace)



		
Give user option to choose date format; US, Aus, Euro, other?
- mm/dm/yyyy, dd/mm/yyyy, dd-mm-yyyy, dd.mm.yyyy, dd-mmm-yyyy, yyyy-mm-dd, yyyy.mm.dd
-- Would require pre-formatting date before passing to Djang template, so remove |date:"Y-m-d" from date fields, unless Django can accept a field format specifier passed in as a template value
- Australian Outlook accepts 27-01-2012, 2012-02-05, 04/02/2012 but ignores 30-Jan-2012
- Excel accepts 27-01-2012, 2012-02-05, 04/02/2012, 30-Jan-2012, but converts to dd-mm-yyyy (which is, I think, whichever format the user has chosen in Windows for short-date)
. Do not allow user to specify their own format, and do not pass in actual format as a GET or POST arg, to prevent user entering a malicious string




Restore hTodo format
- Requires proper handling of nested tasks (as per original DB model)


- Fix html template so that the task bullet displays circle or tick
- handle subtasks (multiple levels)


Handle sub-tasks
- Check how the original Google code did it
-- How is it handled in Outlook CSV (since Outlook doesn't support sub-tasks)?
-- What other formats supports sub-tasks? HTML, ICS, RTM (if so, how?)
hTodo uses
  recurse task root:tasklist.tasks parent:"parent_" children:"children" sort:"position"
so presumably requires additional attributes
* ?? Store the ID of child tasks in a List as a 'children' attribute for task

Handle nested tasks
- Use the parent property to find the parent task ID
-- Required for hTodo
-- Nice to have on HTML view



Display summaries for task lists on .html page
- Number of tasks, num completed (per list, and total)



Change index.html so that the page is cleared (or at least button is disabled), to prevent user clicking again whilst backup is being created and emailed.
- use JavaScript to disable the button after the first click
-- Change button text to "processing ..." ?
Alt; Consider using taskqueue to display a "processing ..." page BEFORE starting the actual work.



Check if the logging level can be set on the logging module;
- If possible, set a flag in app to only run debug level logging when test user is logged in
-- Current workaround; using isTestUser()

Include more info in logging (e.g., line  number, so I don't need to include method name each time)
From C:\Program Files\Google\google_appengine\google\appengine\tools\appcfg.py
      .basicConfig(format=('%(asctime)s %(levelname)s %(filename)s:'
                                    '%(lineno)s %(message)s '))


Catch over quota;
# From http://code.google.com/appengine/docs/quotas.html#When_a_Resource_is_Depleted
-  In the Python API, this exception is apiproxy_errors.OverQuotaError
    try:
      mail.SendMessage(to='test@example.com',
                       from='admin@example.com',
                       subject='Test Email',
                       body='Testing')
    except apiproxy_errors.OverQuotaError, message:
      # Log the error.
      logging.error(message)
      # Display an informative message to the user.
      self.response.out.write('The email could not be sent. '
                              'Please try again later.')


                              
Remove unused modules/classes/methods
- Try;
    pychecker in \Downloads
    pylint
    pyflakes
- Leave them in if they were used by GTP? In case someone else want to add extra features?
-- Probaly not worth it, due to very different structure of GTE vs GTP
From http://stackoverflow.com/questions/2540202/how-can-i-check-for-unused-import-in-many-python-files
    If you use the eclipse IDE with pydev and mylyn, it provides automatic checking and highlighting for unused imports, among other things. It integrates with pylint as well.



- Consider creating a template to produce a text file
-- Investigate if Django can use spaces to indent tasks
-- Need to handle text wrap/overflow




Improve look of /completed page.

Tidy up completed.html


Remove debug=True from application = webapp.WSGIApplication()
- debug=true causee exception message to be displayed in browser


Can't use email when in production due to limit of 100 emails/day
! 28 Jan 2012; Received "OverQuotaError: The API call mail.Send() required more quota than is available."
  even though I'd only sent 9 emails! (only 9%)

  
Try catching exceptions and displaying more meaningful error messages on HTML page



Create a Google code and Google Groups account for js-tasks
- Upload source code
- Announce to GTP groups (see URLs in "GTP Alternative" folder on desktop


