<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC
  "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>Information about Google Tasks</title>
        <link rel="stylesheet" type="text/css" href="tasks_backup.css"></link>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script type="text/javascript">
            // Copyright 2001 Idocs.com      
            // Distribute this script freely, but keep this notice in place

            // backlink object initializer
            function backlink() {
                this.text = 'Go Back';
                this.type = 'link';
                this.write = backlink_write;
                this.form = true;
            }


            // write method
            function backlink_write() {
                if (! window.history) return;
                if (window.history.length == 0)return;

                this.type = this.type.toLowerCase();
                if (this.type == 'button') {
                    if (this.form)
                        document.write('<form>');
                    document.write('<input type=button onClick="history.back(-1)" value="', this.text, '"');
                    if (this.otheratts) document.write(' ', this.otheratts);
                    document.write('>');
                    if (this.form)document.write('<\/form>');
                } else {
                    document.write('<a href="javascript:history.back(-1)"');
                    if (this.otheratts)
                        document.write(' ', this.otheratts);
                    document.write('>');
                    if (this.type == 'image' || this.type == 'img') {
                        document.write('<img src="', this.src, '" alt="', this.text, '"');
                        if (this.width) document.write(' width=', this.width);
                        if (this.height) document.write(' height=', this.height);
                        if (this.otherimgatts) document.write(' ', this.otherimgatts);
                        document.write(' border=0 />');
                    }
                    else
                        document.write(this.text);
                    document.write('<\/a>');
                }
            }        
            
            var gb = new backlink();
            gb.text = "Back to previous page";
            gb.type = "button";
            gb.otheratts = 'class="back-button"';
            gb.write();
        </script>
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-30118203-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
    </head>
  
  <body>
    <div class="break">
    </div>
    
    <h2>Background information about Google Tasks data</h2>
    
    
    <div class="break">
        Note that this information is based on my own discoveries and conclusions as at 27 Feb 2012. I hope that this information helps people, but I cannot guarantee the accuracy or completeness of this information. Note also that Google may change their specifications, in which case this information may be out of date.
    </div>
    
    <h3>Understanding the Raw and Python data formats</h3>
    
    <div class="break">
        <ul>
            <li>
            The Python format includes all the data that Google stores for each task. The meaning of each task property is described at <a href="https://developers.google.com/google-apps/tasks/v1/reference/tasks#resource">developers.google.com/google-apps/tasks/v1/reference/tasks#resource</a>  
            </li>
            <li>The Raw CSV format includes everything except the <span class="property-name">links</span> property.</li>
            <li>In the Raw and Python formats, subtasks are related to parent tasks through the <span class="property-name">parent</span> property. <span class="take-note-smaller">(<a href="#notes">Note</a> 4)</span></li>
            <li>The Nested Python format adds a <span class="property-name">children</span> property to tasks, and moves any child tasks to the parent task's <span class="property-name">children</span> property.</li>
        </ul>
        
        
    </div>
    
    <div class="break">
        Most of the properties are self-explanatory, however the relationship between <span class="property-name">status</span>, <span class="property-name">hidden</span> and <span class="property-name">deleted</span> may require some additional explanation.
        <ul>
            <li>
                Mark a task complete ==> <span class="property-name">status</span> changes from "needsAction" to "completed".
                <ul>
                    <li>Task remains visible in [My Order] and [Sort by date] views.</li>
                </ul>
            </li>
            <li>
                Mark a task complete, and then click [Clear completed] ==> <span class="property-name">status</span> = "completed", <span class="property-name">hidden</span> = "True"
                <ul>
                    <li>
                         Task only appears in [Completed tasks] view
                    </li>
                </ul>
            </li>
            <li>
                Mark a task complete, and then click [Delete] ==> <span class="property-name">status</span> = "completed", <span class="property-name">deleted</span> = "True"
                <ul>
                    <li>
                        Task only appears in [Trash] view <span class="take-note-smaller">(<a href="#notes">Note</a> 3)</span>
                    </li>
                </ul>
            </li>
            
        </ul>
    </div>


    <div class="break">
        Table 1 lists the various states and the corresponding task property values. 
    </div>

    <table border="1" cellpadding="5">
        <caption class="heading" >Table 1: Task states</caption>
        <tr>
            <th colspan="3">Task properties <span class="take-note-smaller">(<a href="#notes">Note</a> 1, 2)</span></th><th rowspan="2">Description</th><th colspan="3">Visible in View:</th>
        </tr>
        <tr>
            <th><span class="property-name">status</span></th>
            <th><span class="property-name">deleted</span></th>
            <th><span class="property-name">hidden</span></th>
            <th class="view-tr">My order<br />Sort by date</th>
            <th class="view-tr">Completed tasks</th>
            <th class="view-tr">Trash<br/><span class="take-note-smaller">(<a href="#notes">Note</a> 3)</span></th>
        </tr>
        
        <tr>
            <td>needsAction</td><td></td><td></td><td>To be completed, visible in main window</td><td>Yes</td><td>No</td><td>No</td>
        </tr>
        <tr>
            <td>completed</td><td></td><td></td><td>Marked complete, before clicking [Clear completed]</td><td>Yes</td><td>Yes</td><td>No</td>
        </tr>
        <tr>
            <td>completed</td><td></td><td>True</td><td>Marked complete, after clicking [Clear completed]</td><td>No</td><td>Yes</td><td>No</td>
        </tr>
        <tr>
            <td>needsAction</td><td>True</td><td></td><td>Deleted incomplete task. Visible only in [Trash]</td><td>No</td><td>No</td><td>Yes</td>
        </tr>
        <tr>
            <td>completed</td><td>True</td><td></td><td>Deleted completed task. Visible only in [Trash]</td><td>No</td><td>No</td><td>Yes</td>
        </tr>
        <tr>
            <td>needsAction</td><td>True</td><td>True</td> <td class="not-valid" colspan="4"> ======= Not valid =======</td>
        </tr>
        <tr>
            <td>needsAction</td><td></td><td>True</td><td class="not-valid" colspan="4"> ======= Not valid =======</td>
        </tr>
        <tr>
            <td>completed</td><td>True</td><td>True</td>   <td class="not-valid" colspan="4"> ======= Not valid =======</td>
        </tr>
    </table>
 
    <div class="break">
    </div>
 
    <h3>Other problems</h3>
    <div class="break">
        The <span class="property-name">completed</span> property has occassionally contained invalid timestamps, where the year is stored as a large negative number such as -1701567. In this case, the application sets the <span class="property-name">completed</span> property to "0001-01-01 00:00:00"
        
    </div>

    <div class="heading">
        <a name="notes">Notes</a>
    </div>
    <table  class="format-selection">
        <tr>
            <td class="note-heading-smaller">
                Note 1 - 
            </td>
            <td>
                <span class="take-note">CAUTION:</span> The Outlook, RTM and iCalendar file formats do not have fields for <span class="property-name">deleted</span> or <span class="property-name">hidden</span>, so those programs will display deleted and/or hidden tasks as normal tasks. Unless you have a specific reason, Do not include <span class="take-note">deleted</span> and <span class="take-note">hidden</span> tasks when downloading for applications such as Outlook, RTM or iCalendar.
            </td>
        </tr>
        <tr>
            <td class="note-heading-smaller">
                Note 2 - 
            </td>
            <td>
                All 3 properties are stored by Google as strings. The <span class="property-name">status</span> field may be either "needsAction" or "completed". The <span class="property-name">deleted</span> and <span class="property-name">hidden</span> properties can be either an empty string (indicating false), or the word "True".
            </td>
        </tr>
        <tr>
            <td class="note-heading-smaller">
                Note 3 - 
            </td>
            <td>
                When tasks are deleted, they are marked as Hidden and moved to the [Trash] view.
                <br/>
                According to Google, deleted tasks stay in the Trash (deleted = True) for "some period of time" and are then auto deleted. I have noticed deleted task up to six months old. There does not appear to be any way to force a task to be actually deleted. That is, the Trash bin cannot be emptied by the user.
            </td>
        </tr>
        <tr>
            <td class="note-heading-smaller">
                Note 4 - 
            </td>
            <td>
                <span class="take-note">CAUTION:</span> Sometimes, tasks can become corrupted, leaving an invalid <span class="property-name">parent</span> value. These tasks still exist in the Google Tasks database, although Google does not display them.
                <div class="small-break">
                </div>
                When a sub-task is deleted or hidden, the sub-task retains the <span class="property-name">parent</span> value, so that Google can restore the task to the correct parent. However, that <span class="property-name">parent</span> value may be invalid for a task that has been deleted or hidden, or whose parent was hidden, deleted or moved whilst the subtask was deleted. It may even refer to a task in another tasklist!
                <div class="small-break">
                </div>
                One common way that tasks become corrupted is;
                <ol>
                    <li>Start with nested tasks A/B/C/D</li>
                    <li>Delete D</li>
                    <li>Delete C</li>
                    <li>Restore D from Trash</li>
                </ol>
                Since task D's parent no longer exists, Google doesn't know where to put the task,
                so it becomes an (invisible) orphan. There is an option to attempt to identify and display invalid/corrupted tasks.
            </td>
        </tr>
    </table>

    <div class="break">
    </div>
 

  </body>
</html>
